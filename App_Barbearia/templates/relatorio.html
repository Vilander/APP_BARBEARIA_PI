{% extends 'base.html' %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
{% block body %}

<div class="container mt-5 mb-5">
    <div class="card-relatorio">
        <h2 class="text-center mb-4">Relatório de Agendamentos</h2>
        <form method="GET" class="row g-3 mb-4">
            <div class="col-md-5">
                <label for="inicio" class="form-label">Data Início:</label>
                <input type="date" id="inicio" name="inicio" class="form-control"
                    value="{{ request.args.get('inicio', '') }}">
            </div>
            <div class="col-md-5">
                <label for="fim" class="form-label">Data Fim:</label>
                <input type="date" id="fim" name="fim" class="form-control" value="{{ request.args.get('fim', '') }}">
            </div>
            <div class="col-md-2 d-flex align-items-end">
                <button type="submit" class="btn btn-filtrar w-100">Filtrar</button>
            </div>
        </form>

        <div class="chart-container">
            <canvas id="graficoAgendamentos"></canvas>
        </div>

        <a href="{{ url_for('main.agenda_hoje') }}" class="btn-agenda-hoje">Ver Agenda de Hoje</a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const ctx = document.getElementById('graficoAgendamentos').getContext('2d');
    const grafico = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: {{ labels| tojson }},
    datasets: [{
        label: 'Agendamentos por Dia',
        data: {{ valores| tojson }},
        backgroundColor: 'rgba(255, 183, 0, 0.8)',
        borderRadius: 8,
        barThickness: 30,
        borderSkipped: false
            }]
        },
    options: {
        responsive: true,
            maintainAspectRatio: false,
                scales: {
            x: {
                ticks: { color: '#ccc' },
                grid: { display: false }
            },
            y: {
                beginAtZero: true,
                    ticks: { stepSize: 1, color: '#ccc' },
                grid: { color: '#444' }
            }
        },
        plugins: {
            legend: {
                labels: { color: '#f8f9fa', font: { weight: 'bold' } }
            },
            tooltip: {
                backgroundColor: '#212529',
                    titleColor: '#ffb700',
                        bodyColor: '#fff',
                            borderColor: '#ffb700',
                                borderWidth: 1
            }
        }
    }
    });
</script>
{% endblock %}